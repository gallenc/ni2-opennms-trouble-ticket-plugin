// Allow GitHub image rendering
:imagesdir: ../images

Welcome to the {plugin-product-name} _Developers Guide_. 
This documentation provides information for developers of the  {plugin-product-name}.

image::admin/architecture-1.drawio.png[OpenNMS Core Architecture]
 
Historically, OpenNMS was developed as a pure Spring application using Hibernate to implement Data Access Objects (DAO's) which synchronise  with the PostgreSQL database. 

Each of the core daemons are managed as JMX beans running within Spring on top of the JVM.

OpenNMS is an event driven application and eventd provides an internal unified event bus through which all processes communicate inside OpenNMS core. The event bus can be extended to minions using Kafka or ActiveMQ.

When minions were developed it was realised that there would be great benefit in moving OpenNMS to use Karaf as an OSGi container framework as this would allow the same OpenNMS modules to be distributed easily and also provide an 'out of the box' plugin mechanism.
Karaf activates OSGi modules as karaf 'features' and the features internally use OSGi Blueprint instead of Spring manifests (although these are very similar).

 New code and enhancements to OpenNMS including plugins are now created as Karaf features however a number of core daemons such as Jetty, Alarmd, Eventd, Provisiond and Collectd still run in Spring. 

For this reason, Karaf currently runs on top of Jetty which allows Karaf features to access the core system.
Over time these will be migrated so that the whole of OpenNMS runs in Karaf and Jetty is run as a karaf module instead of the other way around.

